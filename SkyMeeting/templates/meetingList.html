{% extends 'base.html'%}

{%block title%}SkyMeeting{%endblock%}

{%block cssfile%}
<style type="text/css">
	#meetingTable {
		margin-top: 10px;
		margin-bottom: 15px;
	}
</style>
{%endblock%}

{%block content%}
<div class="container">
		<h3>My Meetings</h3>
		<div class="row-fluid">
			<div class="span3">
				<label for="meetingTypeSct">Choose your meeting type...</label>
				<select id="meetingTypeSct" size="1">
					<option value="-1">All</option>
					<option value="1" {% if type == 1 or type == "1" %}selected="selected"{% endif %}>Formal meeting</option>
					<option value="2" {% if type == 2 or type == "2" %}selected="selected"{% endif %}>Informal meeting</option>
				</select>
				<!-- static meeting type??? -->
			</div>
			<div class="pull-right">
				<label for="meetingAdSct">Choose...</label>
				<select id="meetingAdSct" size="1">
					<option value="0">我参加的会议</option>
					<option value="1" {% if ad == 1 or ad == "1" %}selected="selected"{% endif %}>我创建的会议</option>
				</select>
			</div>
		</div>



		<table class="table table-striped table-bordered table-hover" id="meetingTable">
			<thead>
				<tr role="row">
					<th class="span4">Meeting name</th>
					<th>Meeting type</th>
					<th>Start time</th>
					<th class="span2">Location</th>
					<th>Created by / date</th>
					<th>Status</th>
					<th>Attachment</th>
				</tr>
			</thead>
			<tbody>
				{% for meeting in meetingData %}
				<tr>
					<td><a href="../meeting/?mid={{ meeting.mid }}" target="_blank">{{ meeting.mtitle }}</a></td>
					<td>
						{% if meeting.mtype == 1 %}
							Formal meeting
						{% elif meeting.mtype == 2 %}
							Informal meeting
						{% else %}
							Unknown
						{% endif %}
					</td>
					<td>{{ meeting.mstart }}</td>
					<td>{{ meeting.mplace }}</td>
					<td>{{ meeting.muser.name }} / {{ meeting.mcreate }}</td>
					<td>
						<span class="label label-info">Active</span>
					</td>
					<td>
						<img src="../public/img/attachment_24x24.png" />
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>



		<div class="row-fluid new-item-row">
			<a href="../newmeeting/">&plus;&nbsp;Create new meeting</a>
		</div>
		<div class="row-fluid pagination-row">
			<div class="pagination">
			  <ul>
			    <li class="prev disabled"><a href="#">← Previous</a></li>
			    <li class="active"><a href="#">1</a></li>
			    <li><a href="#">2</a></li>
			    <li><a href="#">3</a></li>
			    <li><a href="#">4</a></li>
			    <li><a href="#">5</a></li>
			    <li class="next"><a href="#">Next → </a></li>
			  </ul>
			</div>
		</div>
	</div>
{%endblock%}





{%block morestatic%}
<script type="text/javascript">
$(function() {

	var redirectFunc = function(){
		var type = $("#meetingTypeSct").find("option:selected").val();
		var ad = $("#meetingAdSct").find("option:selected").val();
		location.href = "/meetings/?type=" + type + "&ad=" + ad;
	};
	$("#meetingTypeSct").change(redirectFunc);
	$("#meetingAdSct").change(redirectFunc);

});
</script>
{%endblock%}