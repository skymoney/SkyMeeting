{% extends 'base.html'%}
{% load i18n %}

{%block title%}SkyMeeting{%endblock%}

{%block cssfile%}
<!-- others -->
<link href="../public/css/uniform.default.css" rel="stylesheet">
<!-- <link href="../public/css/jquery-ui-1.10.1.css" rel="stylesheet"> --><!-- no images included -->
<link href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" rel="stylesheet">
<link href="../public/css/jquery-ui-timepicker-addon.css" rel="stylesheet" />
<link href="../public/css/fineuploader-3.4.1.css" rel="stylesheet" />

<link rel="stylesheet" type="text/css" href="../public/css/specific/newMeeting.css">
{%endblock%}

{%block content%}
<div class="container">
	<h3>{% trans "New Meeting" %}</h3>
	<!-- <div class="row-fluid">
		<div class="box span12">
			<div class="box-header well">
				<h4>Basic info</h4>
			</div>
			<div class="box-content">
				dfadsff<br/><br/>dfadsff<br/><br/>dfdfd
			</div>
		</div>			
	</div> -->
	
	<form class="form-horizontal" id="meetingForm">

		<!-- Basic info block -->
		<div class="row-fluid form-block">
			<div class="form-block-header">
				<h4>{% trans "Basic Info" %}</h4>
			</div>
			<div class="form-block-content">
				<div class="control-group">
					<label class="control-label" for="inputTitle">Title</label>
					<div class="controls">
						<input type="text" id="inputTitle" placeholder="{% trans 'Title' %}" data-validate-presence="true" data-validate-error="#inputTitleError" {% if meetingData %}value="{{ meetingData.mtitle }}"{% endif %} />
						<span class="alert alert-error hide" id="inputTitleError">
							{% trans "Meeting title cannot be blank." %}
						</span>
						<div class="help-block">{% trans "Should be less than 100 characters." %}</div>
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="typeSct">{% trans "Meeting type" %}</label>
					<div class="controls">
						<select id="typeSct">
							<option value="-1">---- {% trans "Please select" %} ----</option>
							<option value="1" {% if meetingData and meetingData.mtype == 1 %}selected="selected"{% endif %}>{% trans "Formal meeting" %}</option>
							<option value="2" {% if meetingData and meetingData.mtype == 2 %}selected="selected"{% endif %}>{% trans "Informal meeting" %}</option>
							<option value="0" {% if meetingData and meetingData.mtype == 0 %}selected="selected"{% endif %}>{% trans "Others" %}</option>
						</select>
						<!-- 验证失效 -->
						<span class="alert alert-error hide" id="typeSctError">
							{% trans "Please select meeting type." %}
						</span>
						<!-- static meeting type??? -->
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="startDatetime">{% trans "Start time" %}</label>
					<div class="controls">
						<input type="text" class="date-input" id="startDatetime" readonly="readonly" data-validate-presence="true" data-validate-error="#startDatetimeError" {% if meetingData %}value="{{ meetingData.mstart }}"{% endif %} />
						<span class="alert alert-error hide" id="startDatetimeError">
							{% trans "Start time cannot be blank." %}
						</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputPlace">{% trans "Place" %}</label>
					<div class="controls">
						<input type="text" id="inputPlace" placeholder="{% trans 'Place' %}" data-validate-presence="true" data-validate-error="#inputPlaceError" {% if meetingData %}value="{{ meetingData.mplace }}"{% endif %} />
						<span class="alert alert-error hide" id="inputPlaceError">
							{% trans "Place cannot be blank." %}
						</span>
						<div class="help-block">{% trans "Should be less than 50 characters." %}</div>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputTel">{% trans "Contact tel" %}</label>
					<div class="controls">
						<input type="text" id="inputTel" placeholder="{% trans 'Contact tel' %}" data-validate-presence="true" data-validate-format="/^[0-9]+$/" data-validate-error="#inputTelError" {% if meetingData %}value="{{ meetingData.mtel }}"{% endif %} />
						<span class="alert alert-error hide" id="inputTelError">
							{% trans "Should be a phone number." %}
						</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputEmail">{% trans "Contact email" %}</label>
					<div class="controls">
						<input type="text" id="inputEmail" placeholder="{% trans 'Contact email' %}" data-validate-email="true" data-validate-error="#inputEmailError" {% if meetingData %}value="{{ meetingData.memail }}"{% endif %} />
						<span class="alert alert-error hide" id="inputEmailError">
							{% trans "Should be an email address." %}
						</span>
					</div>
				</div>

			</div>
		</div>





		<!-- Detail info block -->
		<div class="row-fluid form-block">
			<div class="form-block-header">
				<h4>{% trans "Detail Info" %}</h4>
			</div>
			<div class="form-block-content">
				<textarea class="fulltext-input" id="inputDetail" {% if meetingData %}value="{{ meetingData.mdetail|safe }}"{% endif %}></textarea>
			</div>
			<!-- 验证框架失效 -->
			<span class="alert alert-error hide" id="inputDetailError">
				{% trans "Detail info cannot be blank." %}
			</span>
		</div>





		<!-- Participant block -->
		<div class="row-fluid form-block">
			<div class="form-block-header">
				<h4>{% trans "Participants" %}</h4>
			</div>
			<div class="form-block-content">
				<div class="row-fluid" id="personList">
					<!-- add by js -->
					<!-- 
					<div class="person">
						<span class="person-name">Danis Lu</span>
						<a href="javascript:void(0);" class="remove-person" data-id="1">x</a>
					</div>
					 -->
					{% if meetingData %}
						{% for person in meetingParticipant %}
					<div class="person">
						<span class="person-name">{{ person.name }}</span>
						<a href="javascript:void(0);" class="remove-person" data-id="{{ person.rid }}">x</a>
						<!-- only when edit-mode -->
						<input type="hidden" data-id="{{ person.rid }}" data-name="{{ person.name }}" />
					</div>
						{% endfor %}
					{% endif %}
				</div>
				<span class="alert alert-error hide" id="participantsError">
					{% trans "Participants cannot be none." %}
				</span>
				<div class="row-fluid new-item-row">
					<a href="javascript:void(0);" id="addParticipantLink">+&nbsp;{% trans "Add participant" %}</a>
				</div>
			</div>
		</div>





		<!-- Attachment block -->
		<div class="row-fluid form-block">
			<div class="form-block-header">
				<h4>{% trans "Attachments" %}</h4>
			</div>
			<div class="form-block-content">
				<div class="row-fluid">
					<div id="fineUploader" class="btn btn-primary">
						<div>
							<i class="icon-upload icon-white"></i>
							{% trans "Add file" %}
						</div>
					</div>
					<div class="help-inline" id="uploadHelp">{% trans "You can only upload files end with '.jpeg', '.jpg', '.gif', '.png', '.pdf', '.docx', '.doc', '.pptx', '.ppt', '.xlsx', '.xls', '.txt'. File size is limited to 10 MB."%}</div>
					<div id="uploadMsg">
						{% if meetingData %}
							{% for file in meetingFile %}
								<div class="file alert alert-success">
									<i class="icon-ok"></i>
									<span>{% trans "Successfully saved" %}&nbsp;“{{ file.fname }}”</span>
									<a href="javascript:void(0);" class="remove-file pull-right" data-fid="{{ file.fid }}">{% trans "Remove" %}</a>
									<!-- only when edit-mode -->
									<input type="hidden" data-fid="{{ file.fid }}" data-fname="{{ file.fname }}" />
								</div>
							{% endfor %}
						{% endif %}
					</div>
				</div>
			</div>
		</div>





		<!-- Voting block -->
		<!-- <div class="row-fluid form-block">
			<div class="form-block-header">
				<h4>Voting</h4>
			</div>
			<div class="form-block-content">
				<div clas="row-fluid">
					<a href="javascript:void(0);" data-toggle="modal">Customization</a>
				</div>
			</div>
		</div> -->





		<!-- Actions block -->
		<div class="form-actions">
	        <input type="button" class="btn btn-primary" id="meetingFormOk" value="{% trans 'Save' %}" data-validate="#meetingForm" />
	        <input type="button" class="btn" id="meetingFormCancel" value="{% trans 'Cancel' %}" />
		</div>

		<input type="hidden" id="meetingData" data-mid="{% if meetingData %}{{ meetingData.mid }}{% endif %}" />
	</form>
</div>





<!-- Popup Modal -->
<div class="modal hide fade" id="participantModal" role="dialog" aria-labelledby="participantModalLabel" aria-hidden="true">
	<div class="modal-header">
		<!-- <input type="button" class="close" data-dismiss="modal" aria-hidden="true" value="x" /> -->
		<a href="javascript:void(0);" class="close" role="button" data-dismiss="modal" aria-hidden="true">x</a>
		<h3 id="participantModalLabel">{% trans "Participants" %}</h3>
	</div>
	<div class="modal-body">
		<div class="container-fluid" style="padding-left:0px; padding-right:0px;">
			<div class="row-fluid">
				<!-- sub group nav -->
				<div class="span4">
					<ul class="nav nav-list side-nav" id="groupList">
	  					<li class="active">
	  						<a href="javascript:void(0);" class="group" data-gid="-1">
	  							<span class="group-name">{% trans "All" %}</span>
	  						</a>
	  					</li>
	  					{% for group in groupAll %}
	  					<li>
	  						<a href="javascript:void(0);" class="group" data-gid="{{ group.gid }}">
	  							<span class="group-name">{{ group.gname }}</span>
	  						</a>
	  					</li>
	  					{% endfor %}
	  				</ul>
				</div>


				<div class="span8">
					<!-- sub tag nav -->
					<!-- all tags, not change with group!!! -->
					<div class="row-fluid" id="tagsDiv">
	  					<span>{% trans "Tags" %}:</span>
	  					<ul class="inline" id="tagList">
	  						{% for tag in tagAll %}
	  						<li><a class="tag" data-tid="{{ tag.tid }}">{{ tag.tname }}</a></li>
	  						{% endfor %}
	  					</ul>
	  				</div>

	  				<!-- corresponding person list -->
	  				<div id="personSelectDiv">
	  					<div id="personAjaxDiv">
	  						<!-- add by js -->
	  						<!-- 
		  					<label class="checkbox">
								<div class="checker">
									<span>
										<input type="checkbox" name="selectPerson" value="1" />
									</span>
								</div>
								Danis Lu
							</label>
							 -->
						</div>
						<!-- select all -->
						<div>
							<label class="checkbox">
								<div class="checker">
									<span>
										<input type="checkbox" id="selectAllPerson" />
									</span>
								</div>
								{% trans "All" %}
							</label>
						</div>
	  				</div>


	  				<div class="row-fluid pagination-row">
						<div class="pagination">
						  <ul>
						    <li class="prev disabled"><a href="javascript:void(0);">← {% trans "Previous" %}</a></li>
						    <li class="active"><a href="javascript:void(0);">1</a></li>
						    <li><a href="javascript:void(0);">2</a></li>
						    <li><a href="javascript:void(0);">3</a></li>
						    <li><a href="javascript:void(0);">4</a></li>
						    <li><a href="javascript:void(0);">5</a></li>
						    <li class="next"><a href="javascript:void(0);">{% trans "Next" %} → </a></li>
						  </ul>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
	<div class="modal-footer">
		<input type="button" class="btn btn-primary" id="participantModalOk" value="{% trans 'Save changes' %}" />
		<input type="button" class="btn" data-dismiss="modal" aria-hidden="true" value="{% trans 'Cancel' %}" />
	</div>
</div>
{%endblock%}

{%block morestatic%}
<!-- lib for datepicker -->
<script src="../public/js/jquery-ui-1.10.1.min.js"></script>
<script src="../public/js/jquery.ui.datepicker-zh-CN.js"></script>
<!-- lib for timepicker (enhanced datepicker) -->
<script src="../public/js/jquery-ui-timepicker-addon.js"></script>
<script src="../public/js/jquery.ui.timepicker-zh-CN.js"></script>

<!-- lib for kindeditor -->
<script src="../public/js/kindeditor-4.0.5/kindeditor-min.js"></script>
<script src="../public/js/kindeditor-4.0.5/lang/zh_CN.js"></script>

<!-- lib for fileupload -->
<script src="../public/js/jquery.fineuploader-3.4.1.min.js"></script>

<!-- <script src="../public/js/jquery.uniform.min.js"></script> -->
<script src="../public/js/uniform.default.js"></script>

<script type="text/javascript" src="../public/js/specific/newMeeting.js"></script>
{%endblock%}
